{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["$(document).ready(function(){\r\n    const SITEURL = $('body').data('site-url');\r\n\r\n    Vue.component('product-card', {\r\n        props: {\r\n            product: Object\r\n        },\r\n        delimiters: ['[[', ']]'],\r\n        data() {\r\n            return {\r\n                errored: false,\r\n                response: {}\r\n            }\r\n        },\r\n        methods: {\r\n            addToCart: function (id) {\r\n                let url = SITEURL+\"/app/controllers/inc/cart-add-contr.php?pid=\" + id\r\n                axios\r\n                    .get(url)\r\n                    .then(response => {\r\n                        this.response = response.data\r\n                        account.getCart()\r\n                        $('#exampleModal').modal('show')\r\n                        // console.log(response.data)\r\n                    })\r\n                    .catch(error => {\r\n                        this.errored = true\r\n                        console.log(error)\r\n                    })\r\n            }\r\n        },\r\n        template: `\r\n        <div class=\"col-lg-3 col-md-6 col-12 mb-4\" :pid=\"[[ product.id ]]\">\r\n            <li class=\"card h-100\">\r\n                <div class=\"card-body\">\r\n                    <figure>\r\n                        <img loading=\"lazy\" :src=\"[[ product.image ]]\" :title=\"[[ product.name ]]\" :alt=\"[[ product.name ]]\" class=\"card-img-top\">\r\n                    </figure>\r\n                    <h5 class=\"card-title\">[[ product.name ]]</h5>\r\n                </div>\r\n                <div class=\"card-footer\">\r\n                    <div class=\"d-flex justify-content-between align-items-center\">\r\n                        <button class=\"btn btn-primary\" @click=\"addToCart(product.id)\">\r\n                            Shop now\r\n                        </button>\r\n                        <span class=\"text-success card-footer__price\"><strong>$[[ product.price ]]</strong></span>\r\n                    </div>\r\n                    <p class=\"text-danger\" v-if=\"errored\">Sorry, something went wrong.</p>\r\n                    <p class=\"text-danger\" v-if=\"response.productAlreadyAdded\">This product already in cart.</p>\r\n                </div>\r\n            </li>\r\n        </div>\r\n    `\r\n    });\r\n    Vue.component('cart-product-card', {\r\n        props: {\r\n            products: Array\r\n        },\r\n        delimiters: ['[[', ']]'],\r\n        data() {\r\n            return {}\r\n        },\r\n        methods: {\r\n            removeFromCart: function (id){\r\n                axios.get(SITEURL+`/app/controllers/inc/cart-remove-contr.php?id=${id}`)\r\n                    .then(response => {\r\n                        // console.log(response.data)\r\n                        account.getCart()\r\n                    })\r\n            },\r\n            clearCart: function (){\r\n                axios.get(SITEURL+\"/app/controllers/inc/cart-clear-contr\")\r\n                    .then(response => {\r\n                        // console.log(response.data)\r\n                        account.getCart()\r\n                    })\r\n            }\r\n\r\n        },\r\n        template: `\r\n            <table class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Product Name</th>\r\n                        <th class=\"text-center\">Subtotal</th>\r\n                        <th class=\"text-center\"><a @click=\"clearCart\" class=\"btn btn-sm btn-outline-danger\" href=\"#\">Clear Cart</a></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(product, index) in products\">\r\n                        <td>\r\n                            <div class=\"product-item\">\r\n                                <a class=\"product-thumb\" href=\"#\"><img :src=\"[[ product.image ]]\" alt=\"Product\"></a>\r\n                                <div class=\"product-info\">\r\n                                    <h4 class=\"product-title\">[[ product.name ]]</h4>\r\n                                </div>\r\n                            </div>\r\n                        </td>\r\n                        <td class=\"text-center text-lg text-medium\">$[[ product.price ]]</td>\r\n                        <td class=\"text-center\">\r\n                            <a class=\"remove-from-cart\" @click=\"removeFromCart(product.id)\" href=\"#\" data-toggle=\"tooltip\" title=\"\" data-original-title=\"Remove item\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash3\" viewBox=\"0 0 16 16\">\r\n                                  <path d=\"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z\"/>\r\n                                </svg>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        `\r\n    });\r\n\r\n    if ($('#loginApp').length) {\r\n        new Vue({\r\n            el: '#loginApp',\r\n            data() {\r\n                return {\r\n                    login: \"\",\r\n                    password: \"\",\r\n                    errors: {}\r\n                }\r\n            },\r\n            delimiters: ['[[', ']]'],\r\n            methods: {\r\n                doLogin: function () {\r\n                    let formData = new FormData();\r\n                    formData.append('login', this.login)\r\n                    formData.append('password', this.password)\r\n\r\n                    axios({\r\n                        method: \"post\",\r\n                        url: SITEURL+\"/app/controllers/inc/login-contr.php\",\r\n                        data: formData\r\n                    })\r\n                        .then(response => {\r\n                            this.errors = response.data\r\n                            // console.log(this.errors)\r\n\r\n                            if (response.data.length == 0)\r\n                                window.location.href = \"/phptutor/mvcproj/\"\r\n                        })\r\n                }\r\n            }\r\n        });\r\n    }\r\n    if ($('#signUpApp').length) {\r\n        new Vue({\r\n            el: '#signUpApp',\r\n            data() {\r\n                return {\r\n                    login: \"\",\r\n                    email: \"\",\r\n                    password: \"\",\r\n                    passwordRepeat: \"\",\r\n                    errors: {},\r\n                    success: false\r\n                }\r\n            },\r\n            delimiters: ['[[', ']]'],\r\n            methods: {\r\n                signUp: function () {\r\n                    let formData = new FormData()\r\n                    formData.append('login', this.login)\r\n                    formData.append('password', this.password)\r\n                    formData.append('passwordRepeat', this.passwordRepeat)\r\n                    formData.append('email', this.email)\r\n\r\n                    axios({\r\n                        method: \"post\",\r\n                        url: SITEURL+\"/app/controllers/inc/signup-contr.php\",\r\n                        data: formData,\r\n                    })\r\n                        .then(response => {\r\n                            this.errors = response.data\r\n                            // console.log(response.data)\r\n                            // console.log(Object.keys(response.data), Object.values(response.data))\r\n\r\n                            if (response.data.length == 0) {\r\n                                this.success = true;\r\n                                window.location.href = \"/phptutor/mvcproj/\"\r\n                            }\r\n                        })\r\n                        .catch(response => {\r\n                            console.log(response.data)\r\n                        })\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    if ($('#account').length) {\r\n        var account = new Vue({\r\n            el: \"#account\",\r\n            delimiters: ['[[', ']]'],\r\n            data() {\r\n                return {\r\n                    categories: [],\r\n                    products: [],\r\n                    ordering: \"pub_date|asc\",\r\n                    cartProducts: [],\r\n                    cartCount: 0,\r\n                    totals: 0\r\n                }\r\n            },\r\n            methods: {\r\n                getAllProducts: function () {\r\n                    axios.get(SITEURL+`/app/controllers/inc/load-contr.php?table=product`)\r\n                        .then(response => {\r\n                            this.products = response.data\r\n                            // console.log(response.data)\r\n                        })\r\n                },\r\n                doFilter: function () {\r\n                    axios.get(SITEURL+'/app/controllers/inc/filter-contr.php?categories=' + this.categories + \"&ordering=\" + this.ordering)\r\n                        .then(response => {\r\n                            // console.log(response.data)\r\n                            this.products = response.data\r\n                        })\r\n                },\r\n                getCart: function () {\r\n                    axios.get(SITEURL+'/app/controllers/inc/load-cart-contr.php')\r\n                        .then(response => {\r\n                            this.cartProducts = response.data[0]\r\n                            this.cartCount = response.data[1]\r\n                            this.totals = response.data[2]\r\n                            console.log(this.response)\r\n                        })\r\n                }\r\n\r\n            },\r\n            created() {\r\n                this.getAllProducts()\r\n                this.getCart()\r\n            }\r\n        })\r\n    }\r\n\r\n    if ($('#resetPassword').length) {\r\n        new Vue({\r\n            el: '#resetPassword',\r\n            data() {\r\n                return {\r\n                    email: \"\",\r\n                    errors: {}\r\n                }\r\n            },\r\n            delimiters: ['[[', ']]'],\r\n            methods: {\r\n                doReset: function () {\r\n                    let formData = new FormData()\r\n                    formData.append('email', this.email)\r\n\r\n                    axios({\r\n                        method: \"post\",\r\n                        url: SITEURL+\"/app/controllers/inc/forgot-contr.php\",\r\n                        data: formData,\r\n                    })\r\n                        .then(response => {\r\n                            this.errors = response.data\r\n                            console.log(response.data)\r\n                        })\r\n                        .catch(response => {\r\n                            console.log(response.data)\r\n                        })\r\n                }\r\n\r\n            }\r\n        });\r\n    }\r\n    if ($('#newPassword').length) {\r\n        new Vue({\r\n            el: '#newPassword',\r\n            data() {\r\n                return {\r\n                    newPassword: \"\",\r\n                    newPasswordRepeat: \"\",\r\n                    email: \"\",\r\n                    errors: {}\r\n                }\r\n            },\r\n            delimiters: ['[[', ']]'],\r\n            methods: {\r\n                setNewPassword: function () {\r\n                    let formData = new FormData()\r\n                    formData.append('password', this.newPassword)\r\n                    formData.append('passwordRepeat', this.newPasswordRepeat)\r\n                    formData.append('email', this.email)\r\n\r\n                    axios({\r\n                        method: \"post\",\r\n                        url: SITEURL+\"/app/controllers/inc/newpass-contr.php\",\r\n                        data: formData,\r\n                    })\r\n                        .then(response => {\r\n                            this.errors = response.data\r\n                            // console.log(response.data)\r\n                            // console.log(Object.keys(response.data), Object.values(response.data))\r\n\r\n                            if (response.data.length == 0)\r\n                                window.location.href = \"/phptutor/mvcproj/login\"\r\n                        })\r\n                        .catch(response => {\r\n                            console.log(response.data)\r\n                        })\r\n                }\r\n            },\r\n            mounted() {\r\n                this.email = this.$refs.user_email.value\r\n            }\r\n        });\r\n    }\r\n});"],"file":"main.min.js"}