$(document).ready(function(){const SITEURL=$("body").data("site-url");if(Vue.component("product-card",{props:{product:Object},delimiters:["[[","]]"],data:()=>({errored:!1,response:{}}),methods:{addToCart:function(id){let url=SITEURL+"/app/controllers/inc/cart-add-contr.php?pid="+id;axios.get(url).then(response=>{this.response=response.data,account.getCart(),$("#exampleModal").modal("show")}).catch(error=>{this.errored=!0,console.log(error)})}},template:'\n        <div class="col-lg-3 col-md-6 col-12 mb-4" :pid="[[ product.id ]]">\n            <li class="card h-100">\n                <div class="card-body">\n                    <figure>\n                        <img loading="lazy" :src="[[ product.image ]]" :title="[[ product.name ]]" :alt="[[ product.name ]]" class="card-img-top">\n                    </figure>\n                    <h5 class="card-title">[[ product.name ]]</h5>\n                </div>\n                <div class="card-footer">\n                    <div class="d-flex justify-content-between align-items-center">\n                        <button class="btn btn-primary" @click="addToCart(product.id)">\n                            Shop now\n                        </button>\n                        <span class="text-success card-footer__price"><strong>$[[ product.price ]]</strong></span>\n                    </div>\n                    <p class="text-danger" v-if="errored">Sorry, something went wrong.</p>\n                    <p class="text-danger" v-if="response.productAlreadyAdded">This product already in cart.</p>\n                </div>\n            </li>\n        </div>\n    '}),Vue.component("cart-product-card",{props:{products:Array},delimiters:["[[","]]"],data:()=>({}),methods:{removeFromCart:function(id){axios.get(SITEURL+`/app/controllers/inc/cart-remove-contr.php?id=${id}`).then(response=>{account.getCart()})},clearCart:function(){axios.get(SITEURL+"/app/controllers/inc/cart-clear-contr").then(response=>{account.getCart()})}},template:'\n            <table class="table">\n                <thead>\n                    <tr>\n                        <th>Product Name</th>\n                        <th class="text-center">Subtotal</th>\n                        <th class="text-center"><a @click="clearCart" class="btn btn-sm btn-outline-danger" href="#">Clear Cart</a></th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for="(product, index) in products">\n                        <td>\n                            <div class="product-item">\n                                <a class="product-thumb" href="#"><img :src="[[ product.image ]]" alt="Product"></a>\n                                <div class="product-info">\n                                    <h4 class="product-title">[[ product.name ]]</h4>\n                                </div>\n                            </div>\n                        </td>\n                        <td class="text-center text-lg text-medium">$[[ product.price ]]</td>\n                        <td class="text-center">\n                            <a class="remove-from-cart" @click="removeFromCart(product.id)" href="#" data-toggle="tooltip" title="" data-original-title="Remove item">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">\n                                  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>\n                                </svg>\n                            </a>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        '}),$("#loginApp").length&&new Vue({el:"#loginApp",data:()=>({login:"",password:"",errors:{}}),delimiters:["[[","]]"],methods:{doLogin:function(){let formData=new FormData;formData.append("login",this.login),formData.append("password",this.password),axios({method:"post",url:SITEURL+"/app/controllers/inc/login-contr.php",data:formData}).then(response=>{this.errors=response.data,0==response.data.length&&(window.location.href="/phptutor/mvcproj/")})}}}),$("#signUpApp").length&&new Vue({el:"#signUpApp",data:()=>({login:"",email:"",password:"",passwordRepeat:"",errors:{},success:!1}),delimiters:["[[","]]"],methods:{signUp:function(){let formData=new FormData;formData.append("login",this.login),formData.append("password",this.password),formData.append("passwordRepeat",this.passwordRepeat),formData.append("email",this.email),axios({method:"post",url:SITEURL+"/app/controllers/inc/signup-contr.php",data:formData}).then(response=>{this.errors=response.data,0==response.data.length&&(this.success=!0,window.location.href="/phptutor/mvcproj/")}).catch(response=>{console.log(response.data)})}}}),$("#account").length)var account=new Vue({el:"#account",delimiters:["[[","]]"],data:()=>({categories:[],products:[],ordering:"pub_date|asc",cartProducts:[],cartCount:0,totals:0}),methods:{getAllProducts:function(){axios.get(SITEURL+"/app/controllers/inc/load-contr.php?table=product").then(response=>{this.products=response.data})},doFilter:function(){axios.get(SITEURL+"/app/controllers/inc/filter-contr.php?categories="+this.categories+"&ordering="+this.ordering).then(response=>{this.products=response.data})},getCart:function(){axios.get(SITEURL+"/app/controllers/inc/load-cart-contr.php").then(response=>{this.cartProducts=response.data[0],this.cartCount=response.data[1],this.totals=response.data[2],console.log(this.response)})}},created(){this.getAllProducts(),this.getCart()}});$("#resetPassword").length&&new Vue({el:"#resetPassword",data:()=>({email:"",errors:{}}),delimiters:["[[","]]"],methods:{doReset:function(){let formData=new FormData;formData.append("email",this.email),axios({method:"post",url:SITEURL+"/app/controllers/inc/forgot-contr.php",data:formData}).then(response=>{this.errors=response.data,console.log(response.data)}).catch(response=>{console.log(response.data)})}}}),$("#newPassword").length&&new Vue({el:"#newPassword",data:()=>({newPassword:"",newPasswordRepeat:"",email:"",errors:{}}),delimiters:["[[","]]"],methods:{setNewPassword:function(){let formData=new FormData;formData.append("password",this.newPassword),formData.append("passwordRepeat",this.newPasswordRepeat),formData.append("email",this.email),axios({method:"post",url:SITEURL+"/app/controllers/inc/newpass-contr.php",data:formData}).then(response=>{this.errors=response.data,0==response.data.length&&(window.location.href="/phptutor/mvcproj/login")}).catch(response=>{console.log(response.data)})}},mounted(){this.email=this.$refs.user_email.value}})});
//# sourceMappingURL=main.min.js.map
